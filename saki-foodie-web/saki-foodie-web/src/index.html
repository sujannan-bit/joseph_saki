<div class="app-container">
  <nav class="nav-bar">
    <div class="logo">Saki.Foodie
</div>
    <div class="subtitle">グルメデータベース</div>
    <a href="https://maps.app.goo.gl/xjXBgbswhjsXJwNH6" target="_blank" class="map-list-btn">
       Google Maps 共享清單 / 共有リスト
    </a>
  </nav>

  <main>
    <section class="section-card gemini-area">
      <div class="label">✨ 智慧搜尋 / AI 検索</div>
      <div class="gemini-input-group">
        <input type="text" id="ai-command" placeholder="何か食べたい？">
        <button onclick="startGeminiSearch()">Ask</button>
      </div>
      <div class="ai-status">●Sakiの好みおよび評価システムを自動的に考慮</div>
    </section>

    <section class="section-card db-area">
      <div class="header-row">
        <div class="label">📦 餐廳清單 / リスト</div>
        <button class="btn-add-toggle" onclick="toggleForm()">＋ 新增餐廳</button>
      </div>

      <div class="tab-group">
        <button class="tab-btn active" onclick="setTab('all', this)">全部</button>
      
        <button class="tab-btn" onclick="setTab('high', this)">高分 (4★+)</button>
      </div>

      <div class="filter-row">
        <select id="loc-filter" onchange="renderRests()">
          <option value="all">所有區域</option>
          <option value="嘉義市">嘉義市</option>
          <option value="民雄鄉">民雄鄉</option>
          <option value="中正大學附近">中正大學附近</option>
        </select>
        <select id="style-filter" onchange="renderRests()">
          <option value="all">所有類別</option>
          <option value="中式">中式</option>
          <option value="日式">日式</option>
          <option value="韓式">韓式</option>
          <option value="西式">西式</option>
          <option value="甜點/飲料">甜點/飲料</option>
        </select>
      </div>

      <div id="add-form" class="add-form-box hidden">
        <input type="hidden" id="edit-id" value="">
        <input type="text" id="restName" placeholder="店名 / 店名" class="input-field">
        <input type="text" id="restMap" placeholder="Google Map 連結" class="input-field">
        
        <div class="input-row">
          <select id="addLoc" class="input-field">
            <option value="嘉義市">嘉義市</option>
            <option value="民雄鄉">民雄鄉</option>
            <option value="中正大學附近">中正大學附近</option>
          </select>
          <select id="addStyle" class="input-field">
            <option value="中式">中式</option>
            <option value="日式">日式</option>
            <option value="韓式">韓式</option>
            <option value="西式">西式</option>
            <option value="甜點/飲料">甜點/飲料</option>
          </select>
        </div>

        <div class="rating-row">
          <span>🐰 咪: <input type="number" id="janeScore" min="0" max="5" value="5"></span>
          <span>🧔 蘇: <input type="number" id="suScore" min="0" max="5" value="5"></span>
        </div>
        
        <textarea id="restNote" placeholder="備註筆記 (例如：必點、心得...)" class="input-field note-textarea"></textarea>
        
        <button class="btn-save" onclick="saveRest()">🔒 鎖定存入 / 保存</button>
        <button class="btn-cancel" onclick="toggleForm()">取消 / キャンセル</button>
      </div>
      
      <div id="rest-list" class="rest-list-container"></div>
    </section>

    <section class="section-card saki-note">
      <div class="label">✎ Saki 偏食手帳 / 苦手なもの</div>
      <div class="input-row">
        <input type="text" id="picky-input" placeholder="不吃什麼？">
        <button onclick="addPicky()">紀錄</button>
      </div>
      <div id="picky-tags-container" class="picky-tags"></div>
      <div class="hint">* 點擊標籤可直接編輯或刪除</div>
    </section>
  </main>

  <div id="overlay" class="hidden" onclick="closeOverlay()">
    <div class="modal" onclick="event.stopPropagation()">
      <div id="ai-loading"><div class="spinner"></div><p>Gemini 分析中...</p></div>
      <div id="ai-result-content" class="hidden">
        <h2 id="res-name"></h2>
        <p id="res-meta"></p>
        <div id="res-score"></div>
        <div id="res-note-display" class="res-note-box"></div>
        <a id="res-map-link" href="#" target="_blank" class="map-btn">📍 開啟地圖</a>
        <button class="btn-close" onclick="closeOverlay()">Close</button>
      </div>
    </div>
  </div>
</div>